# 平面上的旋转矩阵推导

平面上的旋转矩阵描述了将一个向量绕原点旋转指定角度后的坐标变换关系。以下是其推导过程的详细步骤：

## 1. 几何直观

考虑二维坐标系中的一点 $P(x, y)$，绕原点逆时针旋转角度 $\theta$ 后得到新点 $P'(x', y')$。我们需要找到 $x'$ 和 $y'$ 与原坐标 $x, y$ 的关系。

## 2. 极坐标法推导

### (1) 原向量的极坐标表示

将向量 $\vec{OP}$ 转换为极坐标：

- 模长：$r = \sqrt{x^2 + y^2}$
- 角度：$\varphi = \arctan\left(\frac{y}{x}\right)$

### (2) 旋转后的极坐标

旋转 $\theta$ 后，新向量的角度为 $\varphi + \theta$，模长仍为 $r$。

### (3) 新坐标转换为直角坐标

利用三角函数展开：

$$
\begin{cases}
x' = r\cos(\varphi + \theta) \\
y' = r\sin(\varphi + \theta)
\end{cases}
$$

### (4) 三角函数和角公式

使用和角公式展开：

$$
\cos(\varphi + \theta) = \cos\varphi\cos\theta - \sin\varphi\sin\theta \\
\sin(\varphi + \theta) = \sin\varphi\cos\theta + \cos\varphi\sin\theta
$$

### (5) 代入原坐标

原坐标 $x = r\cos\varphi$，$y = r\sin\varphi$，代入上式：

$$
\begin{cases}
x' = x\cos\theta - y\sin\theta \\
y' = x\sin\theta + y\cos\theta
\end{cases}
$$

### (6) 矩阵形式

将方程写成矩阵乘法形式：

$$
\begin{bmatrix}
x' \\
y'
\end{bmatrix}
=
\begin{bmatrix}
\cos\theta & -\sin\theta \\
\sin\theta & \cos\theta
\end{bmatrix}
\begin{bmatrix}
x \\
y
\end{bmatrix}
$$

## 3. 基向量法推导

另一种方法是考虑标准基向量 $\mathbf{i} = (1, 0)$ 和 $\mathbf{j} = (0, 1)$ 的旋转结果：

- $\mathbf{i}$ 旋转 $\theta$ 后的坐标为 $(\cos\theta, \sin\theta)$
- $\mathbf{j}$ 旋转 $\theta$ 后的坐标为 $(-\sin\theta, \cos\theta)$

旋转矩阵的列即为旋转后的基向量：

$$
R(\theta) =
\begin{bmatrix}
\cos\theta & -\sin\theta \\
\sin\theta & \cos\theta
\end{bmatrix}
$$

## 4. 验证示例

- 旋转 $90^\circ$（$\theta = 90^\circ$）：

  $$
  R(90^\circ) =
  \begin{bmatrix}
  0 & -1 \\
  1 & 0
  \end{bmatrix}
  $$

  将点 $(1, 0)$ 旋转后得到 $(0, 1)$，符合预期。

- 旋转 $180^\circ$（$\theta = 180^\circ$）：

  $$
  R(180^\circ) =
  \begin{bmatrix}
  -1 & 0 \\
  0 & -1
  \end{bmatrix}
  $$

  点 $(x, y)$ 旋转后变为 $(-x, -y)$，即关于原点对称。

## 5. 重要性质

- 正交性：旋转矩阵的列向量是单位正交的（内积为0，模长为1）。
- 行列式为1：$\det(R) = \cos^2\theta + \sin^2\theta = 1$，说明旋转不改变面积和方向的正交性。
- 逆矩阵：$R^{-1}(\theta) = R(-\theta)$，即逆时针旋转$\theta$的逆操作是顺时针旋转$\theta$。

## 6. 扩展：三维旋转矩阵

三维旋转通常围绕坐标轴进行，例如绕 $z$ 轴旋转的矩阵为：

$$
R_z(\theta) =
\begin{bmatrix}
\cos\theta & -\sin\theta & 0 \\
\sin\theta & \cos\theta & 0 \\
0 & 0 & 1
\end{bmatrix}
$$

## 总结

平面上的旋转矩阵通过几何分析和代数推导得出：

$$
R(\theta) =
\begin{bmatrix}
\cos\theta & -\sin\theta \\
\sin\theta & \cos\theta
\end{bmatrix}
$$

这个矩阵将向量逆时针旋转$\theta$，其推导基于三角函数的和角公式和基向量的旋转特性，具有重要的几何和代数意义。

# 坐标系

## Cartesian坐标系（笛卡尔坐标系）

Cartesian坐标系是一种**直角坐标系**，通过一组相互垂直的轴（通常是x、y、z轴）来描述空间中点的位置。它以法国数学家**勒内·笛卡尔（René Descartes）**的名字命名，是描述物体在空间中位置的最基础、最直观的坐标系统。

### 核心特点

- **正交性**：各轴相互垂直（二维为x和y轴，三维为x、y、z轴）
- **全局性**：坐标值直接对应世界或全局参考系中的绝对位置
- **数学简单**：便于解析几何、微积分等数学工具的运用

### 应用场景

- **物理问题**：描述物体的位置、速度、力等（例如牛顿力学）
- **计算机图形学**：渲染3D模型、处理图像坐标
- **机器人学**：全局定位（如GPS坐标）

## Frenet坐标系（自然坐标系）

Frenet坐标系（或**Frenet-Serret坐标系**）是一种**沿曲线局部定义的移动坐标系**，用于描述曲线上的点在局部方向上的运动状态。它广泛应用于**轨迹规划、运动控制、机器人学和自动驾驶**等领域。

### 核心特点

- **局部性**：坐标系随曲线的形状变化，每个点的坐标系与曲线的几何属性（如切线、法线）对齐
- **三维扩展**：
  - **二维场景**：常用简化版，包含两个方向：**切向（tangent）**和**法向（normal）**
  - **三维场景**：包含三个正交方向：**切向（T）、主法向（N）、副法向（B）**

### 二维Frenet坐标系的定义

对于一条平面上的曲线：

- **切向（t轴）**：与曲线在该点的切线方向一致，指向前进方向
- **法向（n轴）**：
  - **横向方向**：垂直于切向，指向曲线的曲率中心（即左/右方向）
  - **正方向**：由右手法则定义（通常指向曲线凹侧）

### 坐标表示

- **纵向坐标（s）**：沿曲线从起点到该点的**弧长**
- **横向坐标（d）**：垂直于切向方向的**横向偏移量**

### 应用场景

- **自动驾驶路径规划**：
  - 车辆的位置可以用(s, d)表示：
    - s：距离路径起点的弧长
    - d：横向偏离车道中心线的距离
  - 例如：车道保持、换道决策
- **机器人运动控制**：
  - 描述沿预设路径的移动状态（如工业机械臂的轨迹跟踪）
- **运动分析**：
  - 分析物体沿曲线的**速度、加速度**（如赛车在弯道中的动态）

## Cartesian与Frenet坐标的对比

| 特性 | Cartesian坐标系 | Frenet坐标系 |
|------|----------------|--------------|
| 定位方式 | 全局绝对位置（x, y, z） | 沿曲线的局部位置（s: 纵向，d: 横向） |
| 适用场景 | 全局定位、静态几何问题 | 动态轨迹规划、沿路径的运动控制 |
| 坐标轴方向 | 固定方向（x轴、y轴等） | 随曲线形状动态变化（切向、法向） |
| 数学复杂度 | 简单（线性变换） | 复杂（依赖曲率和挠率） |
| 典型用途 | 地图坐标、机器人全局路径规划 | 自动驾驶车道控制、机器人沿轨迹运动 |

## Frenet坐标的数学描述

对于曲线上的任意一点，其**Frenet-Serret向量**和**动态方程**如下：

### 三维Frenet-Serret框架

- **切向单位向量（T）**：沿曲线切线方向
- **主法向单位向量（N）**：指向曲线的曲率中心
- **副法向单位向量（B）**：垂直于T和N的向量（三维空间中）

### 曲率（κ）与挠率（τ）

- **曲率**：描述曲线弯曲程度（κ = |dT/ds|）
- **挠率**：描述曲线在三维空间中的扭转程度（仅三维适用）

### 动态方程（Frenet-Serret公式）

$$
\frac{d}{ds}
\begin{bmatrix}
\mathbf{T} \\
\mathbf{N} \\
\mathbf{B}
\end{bmatrix}
=
\begin{bmatrix}
0 & \kappa & 0 \\
-\kappa & 0 & \tau \\
0 & -\tau & 0
\end{bmatrix}
\begin{bmatrix}
\mathbf{T} \\
\mathbf{N} \\
\mathbf{B}
\end{bmatrix}
$$

其中：
- s：弧长参数
- κ：曲率
- τ：挠率

## 示例：自动驾驶中的Frenet坐标

假设一辆车在车道上行驶，其位置可表示为：

- **纵向坐标（s）**：距离道路起点的行驶距离（如从匝道入口到当前位置的路径长度）
- **横向坐标（d）**：偏离车道中心线的距离（左负、右正，通常要求 d ≈ 0）

通过Frenet坐标，可以方便地：
- 规划**纵向速度**（沿车道加速/减速）
- 控制**横向偏移**（保持车道居中或换道）

## 总结

- **Cartesian坐标系**：全局、静态，适合描述绝对位置
- **Frenet坐标系**：局部、动态，适合沿曲线路径的运动分析和控制
